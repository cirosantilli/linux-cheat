#Formats

##GIF

Max 8 bit colors.

Lossless compressed.

Obsolete.

Associated with the web: huge browser support.

Can contain multiple images to make very short videos.

To create a GIF from multiple images or vice versa use ImageMagick `convert`.

##PNG

Lossless compression, alpha layer, wide software support.

Best format for non-vector lossless.

Interlacing: if yes, the image is streamed in random order with added pixel position information

This is useful for slow data channels like the Internet, so that when the browser loads it, pixels load all over, and not from top to bottom.

This increases the size of the image, since it is then necessary to keep bit position information.

##APNG

Animated PNG! Works on Firefox. Goodbye GIF.

Sample: <http://people.mozilla.org/~dolske/apng/demo.html>

##JPG

Lossy, good compression/quality loss ratio, wide software support.

Best format for non vector lossy.

Amount to lose can be controlled to increase compression.

Algorithm: removes high frequencies of the image's 2D Fourier transform.

##SVG

Vector, XML based, non compressed.

Image is described by mathematical formulas, not bits, therefore it is potentially tiny if the image is mathematically simple and the description is perfect (to floating point precision), which allows for example for infinite zoom.

Cannot however describe photos from real life in general (there are attempts to convert photos to vector, but they are far from usable). it is basically used for images which were generated by the computer without a huge number of lines such as graphs.

Render size may be higher though, but at least over the Internet this is countered by the matters less because bandwidth is a bottleneck.

Reasonable browser support and increasing.

##BMP

Bit by bit, no compression.

Specified by Microsoft.

##Netpbm

- PBM: black and white (1 or 0!)
- PGM: gray scale
- PPM: color

Those three formats are also collectively knows as PNM, Portable aNymap Format.

Mainly used in Linux.

Bad browser support.

Very simple to edit on a text editor because ASCII based.

Not compressed, so not very memory efficient.

Magic numbers: first thing in file, specifies the exact format. Cannot be determined by extension alone because of binary/ASCII forms.

- `P1`: PBM ASCII
- `P2`: PGM ASCII
- `P3`: PPM ASCII
- `P4`: PBM binary
- `P5`: PGM binary
- `P6`: PPM binary

An example to differentiate ASCII from binary. For PBM:

- ASCII: 1 byte per pix.
- in binary 1 *bit* per pixel.

To view the minimalistic examples in this repo, open them with an image editor and do a huge zoom.

##TIF

Lossless or lossy, in practice lossless applications only.

#Get info on image

- `file $f`: type, and for certain formats size other major parameters such as depth.
- ImageMagick `identify -format $f`

#Editors

##Gimp

Image manipulation.

Huge amount of functions, but has a learning curve.

Learn the shortcuts and be happy.

###Docking

Understand a bit about Gimp's docking: <https://www.youtube.com/watch?v=rEYdWCP9d80>

Avoid multi window madness:

    Menu > Windows > Single-Window Mode

Needs Gimp 2.8 (Ubuntu 12.04 stops at Gimp 2.6).

###Layers

If you don't know what layers are and how to use them, learn *now*

- <https://www.youtube.com/watch?v=jrVnI3l9fgE>

It's basic concept, and if you don't understand it nothing will make sense.

Always keep the layer dialog open: it shows a fundamental image state, and allows you to create, delete and reorder layers.

Some actions like:

- `N` only have effect on the currently layer on the layer dialog
- `M` affect the first Z order non transparent layer

Layer Z order is given by the order on the layer dialog.

The layer lock, when active, makes all locked layers move together via the `M` tool.

###Grid

- View -> Grid: toggle grid visibility
- View -> Snap to Grid
- Image -> Configure Grid: set grid size

###Copy page

`Shift + C` copy saves the current selection

`Shift + V` paste create a new temporary layer

To transform it into an actual layer, select it on the layer dialog and push "Create a new layer and add it to the image."

###Tools

Resize entire image:

    Menu > Image > Scale Image

Shortcuts:

- `Shift + B`: bucket fill.

- `Ctrl + D`: duplicate current image.

- `Shift + E`: eraser

    To get hard edges, there is a checkbox on the tool option.

    On images without alpha layer, eraser does not erase to transparency: it paints the background color!

- `M`: move.

    Selects the topmost non transparent layer at pixel under cursor.

    `Shift + M`: move current layer regardless of transparency.

- `N`: peNcil

    - `Shift + `

- `O`: select color of a given pixel

- `Q`: alignment tool.

    Aligns centers, left, right, top bottom of multiple layers.

- `Ctrl + PageDown`: go to previous tab

- `Shift + R`: rotate selection tool

- `X`: swap primary and secondary colors

- `Y`: redo
- `Z`: undo

####Selection tools

- `R`: rectangle select tool.

    While a rectangle selection is on, you can only draw inside the rectangle.

    For example, to draw a rectangle, use this tool, then bucket fill inside the selection.

    While the `R` tool is active, you can use it to move and resize the current rectangle selection.

    To deactivate a rectangle selection, select the tool, and click once without dragging anywhere outside the selection.

    Select a square: start selection, then hold `Shift`.

    Maintain aspect ration of last selection when resizing: start drag, then hold `Shift`.

    - `Ctrl + A + drag`: move the selection elsewhere

    - `Ctrl + Shift + V`: open selection as new image

- `Ctrl + R`: add new rectangle to existing selection

##Inkscape

Good SVG GUI editor.

##Dia

GNOME diagram editor

##DOT

Graph format and name of an editor utility.

Graphviz is the most important front and back-end implementation.

Convert DOT file to image formats:

    dot -Tpng -o outfile.png input.dot
    dot -Tpdf -o outfile.pdf input.dot
    dot -Tsvg -o outfile.svg input.dot

#Viewers

##eog

Eyes of GNOME.

Lightweight image viewer:

    eog a.jpg

##img2txt

Convert image to ASCII art.

caca-utils package.

Stdout output:

    img2txt a.jpg
    img2txt -W `tput cols` a.jpg

- `-W`: width

###caca view

`img2text` on X window:

    cacaview a.pjg

##aview

Converts image to ASCII art! Not as good as `img2txt`.

Works only with Netpbm formats.

Seems to do black and white only:

    asciiview a.jpg

And changing the width was not working for me:

    asciiview -width a.jpg

#Utilities

##ImageMagick

Tons of image conversion tools.

CLI + APIs in lots of languages, including C (native), C++ and Python.

Reading the manual is a great image manipulation course.

###identify

Get info on ImageMagick on given image file and file formats supported by ImageMagick.

List supported formats:

    identify -list format

Get size of an image:

    identify -format "%[fx:w]x%[fx:h]" a.jpg

###convert

- process images
- converts between formats
- input/output format can be deduced automatically (from extension/magic)

Does not do:

- DJVU

####GIF operations

GIF to several images:

    convert a.gif a.png

Generates `a-N.png` images.

Several images to GIF loop forever:

    convert -delay 100 img*.png img.gif

or:

    convert -delay 100 -loop 0 img*.png img.gif

Loop once and stop

    convert -delay 100 -loop 1 img*.png img.gif

####resize

Resize to 50% or original size:

	convert large.png -resize 50% small.png

This:

- takes averages between pixels to make image have less pixels
- keeps bit depth

Therefore, the image file size will be just a bit more than 1/4 of the original because:

- 1/2 x 1/2 = 1/4 of the number of pixels
- the PNG metadata size is unchanged, so this is not divided by 4.

Resize to fixed width of 100 px, height maintains original proportion:

	convert large.png -resize 100x small.png

####crop

`10x10`: rectangle to keep:

        convert -crop 10x10 a.jpg b.jpg

`+10+10`: top left corner of rectangle

        convert -crop 10x10+10+10 a.jpg b.jpg

top 50 percent:

        convert -crop 100x50% a.jpg b.jpg

cannot give top left corner in percentage

bottom 50 percent:

        convert -gravity south -crop 100x50% a.jpg b.jpg

####color

- `-colorspace Gray`: convert to grayscale:

        convert in.png -colorspace Gray out.png

- `-monochrome`: monochrome image. TODO == -depth 1? But not in my tests.

- `-depth`: number of bits per pixel.

- `-density`: PDFs are fixed width for printers, not pixel data, so you have to say how many DPI you want to take 300 makes output quite readable

    Always set this for PDFs.

    PDF to one JPG per page:

        convert -density 300 a.pdf a.jpg

- `-threshold`: Simple way to convert to black and white: if color average is above threshold, pixel is white else pixel is black:

        convert -threshold 50 a.jpg b.jpg

- `-level`: linear transform on color space:

        convert -level -100,100 a.jpg b.jpg

###animate

Animate multiple images interactively:

    animate -delay 100 img*.png

Not meant to generate a GIF from the command line, but good choice to preview a GIF before creating one.

##ExactImage

ImageMagick competitor, supposedly faster. C++ template API.

##caca-utils

Contains `img2txt`.

##dvipng

Convert DVI to PNG.

Important application: LaTeX -> DVI -> PNG -> website.
